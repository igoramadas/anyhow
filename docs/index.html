<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Anyhow</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Anyhow</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> Anyhow</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#anyhow" id="anyhow" style="color: inherit; text-decoration: none;">
					<h1>Anyhow</h1>
				</a>
				<p><a href="https://npmjs.com/package/anyhow"><img src="https://img.shields.io/npm/v/anyhow.svg" alt="Version"></a>
					<a href="https://travis-ci.org/igoramadas/anyhow"><img src="https://img.shields.io/travis/igoramadas/anyhow.svg" alt="Build Status"></a>
				<a href="https://coveralls.io/github/igoramadas/anyhow?branch=master"><img src="https://img.shields.io/coveralls/github/igoramadas/anyhow.svg" alt="Coverage Status"></a></p>
				<p>Drop-in logging wrapper for <a href="https://www.npmjs.com/package/winston">winston</a>,
					<a href="https://www.npmjs.com/package/bunyan">bunyan</a>, <a href="https://www.npmjs.com/package/pino">pino</a>
				and <a href="https://nodejs.org/api/console.html">console</a>. Let the user decide which one he prefers :-)</p>
				<a href="#why" id="why" style="color: inherit; text-decoration: none;">
					<h2>Why?</h2>
				</a>
				<p>The idea for Anyhow came after a conflict of interests regarding logging libraries on some of my
					personal and work projects. Some were using winston. A few other went for bunyan. Some were simply
				streaming to the console.</p>
				<p>By using Anyhow we can achieve a consistent logging mechanism regardless of what library is
					actually doing the logging. Install anyhow, replace the log calls and let it delegate the
					actual logging to the correct library. It also has some handy features like compacting the
				messages, pre-processing arguments and stylizing the console output.</p>
				<a href="#basic-usage" id="basic-usage" style="color: inherit; text-decoration: none;">
					<h2>Basic usage</h2>
				</a>
				<pre><code class="language-javascript"><span class="hljs-keyword">const</span> logger = <span class="hljs-built_in">require</span>(<span class="hljs-string">"anyhow"</span>)

<span class="hljs-comment">// Use defaults: will try loading winston, then bunyan, then pino, and fall back to console.</span>
logger.setup()

<span class="hljs-comment">// Log some text.</span>
logger.info(<span class="hljs-string">"My app has started"</span>)

<span class="hljs-comment">// Mix and match arguments.</span>
logger.info({<span class="hljs-attr">someJson</span>: <span class="hljs-string">"text"</span>}, <span class="hljs-string">"Some string"</span>, <span class="hljs-number">123</span>)

<span class="hljs-comment">// Log exceptions.</span>
<span class="hljs-keyword">try</span> {
    oops.itFailed()
} <span class="hljs-keyword">catch</span> (ex) {
    logger.error(<span class="hljs-string">"MyApp.method"</span>, ex)
}

<span class="hljs-comment">// By default "debug" level is disabled, so this won't log anything.</span>
logger.debug(<span class="hljs-string">"Debug something"</span>, myObject)

<span class="hljs-comment">// Enable only debug and error logging.</span>
logger.levels = [<span class="hljs-string">"debug"</span>, <span class="hljs-string">"error"</span>]

<span class="hljs-comment">// Now warn calls won't do anything.</span>
logger.warn(<span class="hljs-string">"Won't log because we disabled it before"</span>)
logger.debug(<span class="hljs-string">"This will now be logged"</span>)

<span class="hljs-comment">// You can also call the .log method directly, passing level as the first argument.</span>
logger.log(<span class="hljs-string">"info"</span>, <span class="hljs-string">"This will be called as info"</span>, someExtraObject, <span class="hljs-number">123</span>)</code></pre>
				<a href="#enforcing-a-specific-library" id="enforcing-a-specific-library" style="color: inherit; text-decoration: none;">
					<h3>Enforcing a specific library</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-comment">// Use winston default logger.</span>
logger.setup(<span class="hljs-string">"winston"</span>)

<span class="hljs-comment">// Or pass the winston logger directly.</span>
<span class="hljs-keyword">const</span> winstonLogger = <span class="hljs-built_in">require</span>(<span class="hljs-string">"winston"</span>).createLogger(options)
logger.setup(winstonLogger)

<span class="hljs-comment">// Same for bunyan.</span>
logger.setup(<span class="hljs-string">"bunyan"</span>)

<span class="hljs-comment">// Or...</span>
<span class="hljs-keyword">const</span> bunyanLogger = <span class="hljs-built_in">require</span>(<span class="hljs-string">"bunyan"</span>).createLogger(options)
logger.setup(bunyanLogger)

<span class="hljs-comment">// Also pino.</span>
logger.setup(<span class="hljs-string">"pino"</span>)

<span class="hljs-comment">// Enforce using the console.</span>
logger.setup(<span class="hljs-string">"console"</span>)

<span class="hljs-comment">// Disable logging.</span>
logger.setup(<span class="hljs-string">"none"</span>)</code></pre>
				<a href="#changing-default-settings" id="changing-default-settings" style="color: inherit; text-decoration: none;">
					<h3>Changing default settings</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-comment">// Separate logged arguments with a ", " comma instead of default " | " pipe.</span>
logger.separator = <span class="hljs-string">", "</span>

<span class="hljs-comment">// Outputs "This is, now separated, by comma".</span>
logger.info(<span class="hljs-string">"This is"</span>, <span class="hljs-string">"now separated"</span>, <span class="hljs-string">"by comma"</span>)

<span class="hljs-comment">// Do not compact messages (default is compact = true).</span>
logger.compact = <span class="hljs-literal">false</span>

<span class="hljs-comment">// Logged output will contain JSON with spaces and line breaks.</span>
logger.info(someComplexObject, somethingElse)

<span class="hljs-comment">// Make warn messages red and italic instead of default yellow (depends on "chalk" module).</span>
logger.styles.warn = [<span class="hljs-string">"red"</span>, <span class="hljs-string">"italic"</span>]
logger.warn(<span class="hljs-string">"Console output now shows yellow italic for this"</span>)
logger.info(<span class="hljs-string">"Info is still default gray"</span>)

<span class="hljs-comment">// Disable styling.</span>
logger.styles = <span class="hljs-literal">null</span>
logger.warn(<span class="hljs-string">"No console styles anymore, even if chalk is installed"</span>)

<span class="hljs-comment">// Prepend log level on the console.</span>
logger.levelOnConsole = <span class="hljs-literal">true</span>
logger.info(<span class="hljs-string">"This will now have 'INFO:' on the beginning of the message"</span>)

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Some exception thrown.</span>
    myApp.method(fails)
} <span class="hljs-keyword">catch</span> (ex) {
    <span class="hljs-comment">// By default the stack trace is not logged...</span>
    logger.error(<span class="hljs-string">"error without stack trace"</span>, ex)

    <span class="hljs-comment">// Include stack trace by setting errorStack = true.</span>
    logger.errorStack = <span class="hljs-literal">true</span>
    logger.error(<span class="hljs-string">"error with stack trace"</span>, ex)
}</code></pre>
				<a href="#pre-processing-logged-messages" id="pre-processing-logged-messages" style="color: inherit; text-decoration: none;">
					<h3>Pre-processing logged messages</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-comment">// Sample user object.</span>
<span class="hljs-keyword">const</span> user = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"John Doe"</span>,
    <span class="hljs-attr">password</span>: <span class="hljs-string">"mypass"</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">"sometoken"</span>
}

<span class="hljs-comment">// No preprocessor by default, will log all user data.</span>
logger.info(user)

<span class="hljs-comment">// Add preprocessor to remove passwords and tokens from logged objects.</span>
logger.preprocessor = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">args</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> a <span class="hljs-keyword">of</span> args) {
        <span class="hljs-keyword">if</span> (a &amp;&amp; a.password) {
            <span class="hljs-keyword">delete</span> a.password
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a &amp;&amp; a.token) {
            <span class="hljs-keyword">delete</span> a.token
        }
    }
    <span class="hljs-keyword">return</span> args
}

<span class="hljs-comment">// User's password and token won't be loggged.</span>
logger.info(user)

<span class="hljs-comment">// User was not mutated, as it will deep clone before logging.</span>
<span class="hljs-built_in">console</span>.dir(user)</code></pre>
				<a href="#uncaught-and-unhandled-errors" id="uncaught-and-unhandled-errors" style="color: inherit; text-decoration: none;">
					<h3>Uncaught and unhandled errors</h3>
				</a>
				<pre><code class="language-javascript"><span class="hljs-comment">// Enable the uncaught exceptions handled.</span>
logger.uncaughtExceptions = <span class="hljs-literal">true</span>

<span class="hljs-comment">// Throw some exception.</span>
<span class="hljs-comment">// Will log the "Not a function" exception to the current transport.</span>
<span class="hljs-comment">// Code will not execute from here, but exception was logged to the console.</span>
<span class="hljs-keyword">let</span> notFunction = <span class="hljs-literal">true</span>
notFunction()

<span class="hljs-comment">// Also for unhandled rejections.</span>
logger.unhandledRejections = <span class="hljs-literal">true</span>

<span class="hljs-comment">// Here a sample of unhandled rejection.</span>
<span class="hljs-keyword">let</span> failFunction = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"Oh no!"</span>)
}
<span class="hljs-comment">// Will log the unhandled rejection.</span>
failFunction()
</code></pre>
				<a href="#options" id="options" style="color: inherit; text-decoration: none;">
					<h2>Options</h2>
				</a>
				<a href="#compact-true" id="compact-true" style="color: inherit; text-decoration: none;">
					<h4>compact (true)</h4>
				</a>
				<p>Boolean, defines if messages should be compacted, so line breaks and extra spaces will be removed.</p>
				<a href="#errorstack-false" id="errorstack-false" style="color: inherit; text-decoration: none;">
					<h4>errorStack (false)</h4>
				</a>
				<p>Boolean, defines if stack traces should be logged with errors and exceptions.</p>
				<a href="#levels-quotinfoquot-quotwarnquot-quoterrorquot" id="levels-quotinfoquot-quotwarnquot-quoterrorquot" style="color: inherit; text-decoration: none;">
					<h4>levels ([&quot;info&quot;, &quot;warn&quot;, &quot;error&quot;])</h4>
				</a>
				<p>Array of string, defines which logging levels are enabled. Possible logging levels are
				[&quot;info&quot;, &quot;warn&quot;, &quot;error&quot;].</p>
				<a href="#levelonconsole-false" id="levelonconsole-false" style="color: inherit; text-decoration: none;">
					<h4>levelOnConsole (false)</h4>
				</a>
				<p>Boolean, if true it will prepend the log level (INFO, WARN, ERROR etc...) to the message on the console.</p>
				<a href="#uncaughtexceptions-false" id="uncaughtexceptions-false" style="color: inherit; text-decoration: none;">
					<h4>uncaughtExceptions (false)</h4>
				</a>
				<p>Boolean, if true it will log uncaught exceptions to the console (but will NOT quit execution).</p>
				<a href="#preprocessor" id="preprocessor" style="color: inherit; text-decoration: none;">
					<h4>preprocessor</h4>
				</a>
				<p>You can define a function(arrayOfObjects) that will be used to process arguments before generating
					the final log messages. This is useful if you want to change or remove information from objects, for
					instance you might want to obfuscate all <code>password</code> fields and mask <code>telephone</code> fields. The function
				can either mutate the arrayOfObjects or return the new arguments as a result.</p>
				<a href="#separator-quot--quot" id="separator-quot--quot" style="color: inherit; text-decoration: none;">
					<h4>separator (&quot; | &quot;)</h4>
				</a>
				<p>String, defines the default separator between logged objects. For instance if you do a
				<code>info(123, &quot;ABC&quot;)</code>, output will be &quot;123 | ABC&quot;.</p>
				<a href="#styles-object" id="styles-object" style="color: inherit; text-decoration: none;">
					<h4>styles (object)</h4>
				</a>
				<p>Object with keys defining the styles for each level on console output. This will only be effective
					if you also have the <a href="https://www.npmjs.com/package/chalk">chalk</a> module installed. By default
				<code>debug</code> is gray, <code>info</code> is white, <code>warn</code> is yellow and <code>error</code> is bold red.</p>
				<a href="#methods" id="methods" style="color: inherit; text-decoration: none;">
					<h2>Methods</h2>
				</a>
				<a href="#consolelevel-args--gt-string" id="consolelevel-args--gt-string" style="color: inherit; text-decoration: none;">
					<h4>console(level, args) -&gt; string</h4>
				</a>
				<p>Log to console directly, regardless of which library is currently active. First argument is
					the <code>level</code> string, and second is array of things to be logged.
				Returns the final, parsed message that was logged.</p>
				<a href="#loglevel-args--gt-string" id="loglevel-args--gt-string" style="color: inherit; text-decoration: none;">
					<h4>log(level, args) -&gt; string</h4>
				</a>
				<p>Main logging method. First argument is the <code>level</code> string, and second is array of things to be logged.
					Please note that only &quot;info&quot;, &quot;warn&quot; and &quot;error&quot; levels are enabled by default.
				Returns the final, parsed message that was logged.</p>
				<a href="#debugargs--gt-string" id="debugargs--gt-string" style="color: inherit; text-decoration: none;">
					<h4>debug(...args) -&gt; string</h4>
				</a>
				<p>Shortcut to log(&quot;debug&quot;, args). Please note that &quot;debug&quot; is not included on the default <code>levels</code>.</p>
				<a href="#infoargs--gt-string" id="infoargs--gt-string" style="color: inherit; text-decoration: none;">
					<h4>info(...args) -&gt; string</h4>
				</a>
				<p>Shortcut to log(&quot;info&quot;, args).</p>
				<a href="#warnargs--gt-string" id="warnargs--gt-string" style="color: inherit; text-decoration: none;">
					<h4>warn(...args) -&gt; string</h4>
				</a>
				<p>Shortcut to log(&quot;warn&quot;, args).</p>
				<a href="#errorargs--gt-string" id="errorargs--gt-string" style="color: inherit; text-decoration: none;">
					<h4>error(...args) -&gt; string</h4>
				</a>
				<p>Shortcut to log(&quot;error&quot;, args).</p>
				<a href="#api-documentation" id="api-documentation" style="color: inherit; text-decoration: none;">
					<h2>API documentation</h2>
				</a>
				<p>You can browse the full API documentation at <a href="https://anyhow.devv.com">https://anyhow.devv.com</a>.</p>
				<p>Or check these following modules that are using Anyhow for logging:</p>
				<ul>
					<li><a href="https://github.com/igoramadas/expresser">Expresser</a></li>
					<li><a href="https://github.com/igoramadas/monitorado">Monitorado</a></li>
					<li><a href="https://github.com/igoramadas/setmeup">SetMeUp</a></li>
				</ul>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-9331973-4', '');
        ga('send', 'pageview');
    </script>
</body>
</html>